#! /usr/bin/env Rscript

# -------------------------------------------------------------------------------------------------------------
# Part 1: prep input data -------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/1_prepare_inputs.rscript")
cat("\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 2: CGM work --------------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/2_cgm_collection.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 3: dist matrices ---------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/3_dist_matrices.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 4: averages --------------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/4_averages.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 5: ecc collection --------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/5_ecc_collection.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 6: combine results -------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/6_combine_results.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# Part 7: heatmaps --------------------------------------------------------------------------------------------
# -------------------------------------------------------------------------------------------------------------

source("scripts/7a_topX_distances.rscript")
cat("\n\n\n")

source("scripts/7b_topY_heatmaps.rscript")
cat("\n\n\n")

# -------------------------------------------------------------------------------------------------------------
# should be able to run this script through an R console (in RStudio too), through a terminal window, or by double-clicking
if (interactive()) {
  a <- readline("Press [enter] to close the window: ")
  cat("\n")
}else {
  cat("Press [enter] to close the window: ")
  a <- readLines("stdin", n=1)
  cat( "\n" )
}


